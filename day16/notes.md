I came back to this on 19.10.2022 hoping to refactor some of the logic with the use of binary format.
I was able to refactored how I converted between hexadecimal and binary.
Nothing more came out of that.
Rest of the work was just refactoring repeated functions (didn't even read the problem definition again), defining main and logging instead of printing etc., nothing classy.
--
At the end I managed to merge two scripts into one.
There was only a small part where I lost track.
While refactoring I couldn't differentiate "version" and "value", thus didn't catch why it wasn't behaving identically.
There should be a better way to handle it but I'm not interested anymore.